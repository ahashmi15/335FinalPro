<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/style.css" />
    <title>Tasks for <%= date %></title>
  </head>

  <body class="day-page">

    <div class="day-shell">
      <h1 class="day-title">Tasks for <%= date %></h1>
      <hr class="day-divider" />

      <div class="day-grid">
        <% tasks.forEach(task => { %>

          <% if (task.status === "completed") { %>
            <div class="task-card day-task-card completed-task">
              <h3 class="day-task-title"><%= task.title %></h3>

              <div class="day-task-meta">
                <span class="day-task-time"><%= task.hours %>h <%= task.minutes %>m</span>
                <span class="day-task-status">(Completed)</span>
              </div>
            </div>

          <% } else if (task.status === "failed") { %>
            <div class="task-card day-task-card failed-task">
              <h3 class="day-task-title"><%= task.title %></h3>

              <div class="day-task-meta">
                <span class="day-task-time"><%= task.hours %>h <%= task.minutes %>m</span>
                <span class="day-task-status failed-label">Failed</span>
              </div>
            </div>

          <% } else { %>
            <a href="/task/<%= task._id %>" class="task-card day-task-card">
              <h3 class="day-task-title"><%= task.title %></h3>

              <div class="day-task-meta">
                <span class="day-task-time"><%= task.hours %>h <%= task.minutes %>m</span>
              </div>

              <% if (task.objectives && task.objectives.length > 0) { %>
                <ul class="day-task-obj">
                  <% task.objectives.forEach(obj => { %>
                    <li><%= obj %></li>
                  <% }) %>
                </ul>
              <% } %>
            </a>
          <% } %>

        <% }) %>
      </div>

      <div class="day-bottom">
        <a href="/list-days" class="day-back-btn">‚Üê Back to Days</a>
      </div>
    </div>

  </body>
</html>
