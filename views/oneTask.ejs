<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/style.css">
    <title><%= task.title %></title>
</head>

<body class="focus-page">

<div class="focus-shell">

   
    <h1 class="focus-title"><%= task.title %></h1>

   
    <div class="task-container focus-container">

        
        <div class="left-box focus-box">
            <h2 class="focus-heading">Objectives</h2>
            <div class="objectives-list">
                <% task.objectives.forEach((obj, index)=> { %>
                    <div class="objective-item <%= index === 0 ? 'current-objective' : '' %>" data-index="<%= index %>">
                        <%= obj %>
                    </div>
                    <% }) %>
            </div>
        </div>

        
        <div class="center-box focus-box focus-center">
            <h2 class="focus-heading">Timer</h2>
            <div id="timer" class="timer-display focus-timer"></div>
        </div>

       
        <div class="right-box focus-box">
            <h2 class="focus-heading">Current Objective</h2>
            <div id="currentObjective" class="current-text focus-current">
                <%= task.objectives[0] %>
            </div>
        </div>

    </div>

   
    <div id="quoteBox" class="focus-quote">
        Loading motivational quote...
    </div>

   
    <div class="focus-bottom">
        <button id="endNowBtn" class="neutral-btn end-now-btn focus-end-btn">
            End Now
        </button>
    </div>

</div>


<script>
    window.taskHours = Number("<%= task.hours %>");
    window.taskMinutes = Number("<%= task.minutes %>");

    window.taskDurationSeconds =
        (window.taskHours * 3600) + (window.taskMinutes * 60);
</script>

<script src="/oneTask.js"></script>


<div id="timeUpModal" class="modal hidden">
  <div class="focus-modal-content">

    <h2 class="focus-modal-title">Allotted Time Is Over</h2>

    <form action="/task/<%= task._id %>/complete" method="POST">
      <button type="submit"
              class="focus-popup-btn focus-popup-complete">
        Mark as Complete
      </button>
    </form>

    <form action="/task/<%= task._id %>/fail" method="POST">
      <button type="submit"
              class="focus-popup-btn focus-popup-fail">
        Move On (Fail)
      </button>
    </form>

    <button id="addTimeBtn"
            class="focus-popup-btn focus-popup-add">
      Add More Time
    </button>

  </div>
</div>


</body>
</html>
